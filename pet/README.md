# 别偷我的API！！！！！！
# 🐾 宠物识别与养护助手

## 项目简介

这是一个基于AI技术的智能宠物识别与养护助手应用，采用Streamlit构建交互界面，集成智谱AI的多模态识别能力和百度语音服务，为用户提供宠物品种识别、健康咨询、语音交互等一站式宠物养护解决方案。

### 核心功能
- **图像识别**：通过上传宠物照片，智能识别宠物品种和特征
- **语音交互**：支持本地录音输入和语音合成输出，实现自然对话体验  
- **智能问答**：基于专业宠物知识库，提供个性化养护建议
- **多模态融合**：结合视觉和文本信息，提升识别准确性和交互体验

## ✨ 创新亮点

### 1. 多模态AI融合
- 集成智谱GLM-4V视觉模型进行宠物图像识别
- 结合文本对话历史，提供更精准的专业建议
- 支持图片+文字的混合输入模式

### 2. 本地化语音处理
- 使用sounddevice实现高质量本地录音
- 百度语音识别(ASR)准确转换语音为文本
- 百度语音合成(TTS)支持多种音色选择

### 3. 智能音频管理
- 文本超长自动分段处理，避免API限制
- 前端Web Audio API实现音频无缝合并播放
- 支持暂停/继续播放功能，优化用户体验

### 4. 状态管理优化
- Streamlit会话状态持久化存储
- 图片上传状态智能跟踪与更新
- 对话历史与音频缓存分离管理

## 🚀 使用指南

### 环境准备
```bash
# 安装依赖包
pip install -r requirements.txt

# 配置环境变量（创建.env文件）
ZHIPU_API_KEY=your_zhipuai_api_key
BAIDU_APP_ID=your_baidu_app_id
BAIDU_API_KEY=your_baidu_api_key
BAIDU_SECRET_KEY=your_baidu_secret_key
```

### 启动应用
```bash
streamlit run pet_assistant.py
```

### 操作流程

#### 1. 图片识别模式
```
上传宠物照片 → 输入相关问题 → 获取AI分析结果
```
- 在侧边栏点击"选择照片"上传宠物图片
- 在聊天框输入关于宠物的问题
- 查看AI识别结果和专业建议

#### 2. 语音交互模式
```
设置录音参数 → 点击开始录音 → 自动语音识别 → AI回复 → 语音播报
```
- 调整录音时长（1-10秒）
- 选择语音播报音色（女声/男声/情感音色）
- 点击"开始录音并识别"按钮
- 系统自动完成语音→文字→AI处理→语音输出

#### 3. 文字对话模式
```
直接输入问题 → 查看AI回复 → 可选语音播报
```
- 在底部输入框直接输入文字问题
- 系统返回智能回复
- 可选择语音播放功能听取答案

### 主要特性

| 特性 | 描述 |
|------|------|
| 📸 图像识别 | 支持JPG/PNG格式宠物照片识别 |
| 🎤 语音交互 | 本地录音+云端识别合成 |
| 💬 历史记忆 | 对话上下文关联理解 |
| 🔊 多音色 | 支持4种不同语音风格 |
| ⏸️ 暂停控制 | 音频播放支持暂停/继续 |
| 🗑️ 便捷管理 | 一键清空对话历史 |

## 🛠️ 技术栈

- **前端框架**: Streamlit 1.28.2
- **AI模型**: 智谱GLM-4/GLM-4V
- **语音服务**: 百度AI语音识别与合成
- **音频处理**: sounddevice, soundfile, Web Audio API
- **开发语言**: Python 3.8+

## 📝 注意事项

1. 需要有效的智谱AI和百度语音API密钥
2. 本地录音需要麦克风权限
3. 推荐使用Chrome浏览器获得最佳音频播放体验
4. 图片文件大小建议不超过10MB

---

*让科技关爱每一个毛孩子的健康成长* 🐶🐱
